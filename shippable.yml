# Language setting
language: node_js


# Version number
node_js:
  - 0.10.25
  
# Mongo binds to 127.0.0.1 by default
services:
  - mongodb

  
build:
 cache: true
# cache_dir_list:
 #  - $SHIPPABLE_BUILD_DIR/model.js
 ci:
   - npm install
   - mkdir -p shippable/testresults
   - mkdir -p shippable/codecoverage
   - export XUNIT_FILE=shippable/testresults/result.xml
   - ./node_modules/.bin/istanbul cover grunt -- -u tdd
   - ./node_modules/.bin/istanbul report cobertura --dir  shippable/codecoverage/
   - cat shippable/codecoverage/cobertura-coverage.xml
   - mongo test --eval "db.dropDatabase()"
  
